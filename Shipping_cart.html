<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shipping Cart</title>
    <!-- Bootstrap Icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- Boostrap CSS -->
    <link rel="stylesheet" href="./assets/CSS/bootstrap.min.css">
</head>
<body>
   <!--Navbar-->
  <nav class="navbar navbar-expand-lg bg-body-tertiary" data-bs-theme="dark">
    <div class="container">
        <a class="navbar-brand" href="#">Aurum Handbags</a>
            <ul class="nav justify-content-end">
                <li class="nav-item">
                    <a class="nav-link text-light active"  href="./index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-light" href="./Manage_product.html">Manage Productt</a>
                </li>
            </ul>
        </ul>
        </div>
    </div>
</nav>     
<section class="d-flex flex-column align-items-center mt-5">
    <h1 class="mb-4">Shipping Cart</h1>
    <table class="table table-bordered border-dark w-75 text-center">
        <thead>
            <tr>
            <th>Sr no.</th>
            <th>ID</th>
            <th>Product Name</th>
            <th>Brand</th>
            <th>Category</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Description</th>
            <th>Colour</th>
            <th>Material</th>
            <th>Product Image</th>
            <th>Sub Total</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody id="cartTable"></tbody>
    </table>
</section>
<section>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12">
                <button class="btn btn-danger mb-2" onclick="clearCart()">Clear Cart</button>
                <h4>Total â‚¹<span id="cartTotal"></span></h4>
            </div>
        </div>
    </div>
</section>
<!-- Bootstrap JS -->
<script src="./assets/JS/bootstrap.bundle.js"></script>
<script src="./assets/JS/script.js"></script>
<script>
    function viewCart(){
        const cartTable = document.getElementById("cartTable");
        const cartTotal = document.getElementById("cartTotal");
        if(cart.length === 0){
            cartTable.innerHTML = `
              <tr>
                    <td colspan="13" class="text-center"><h4>Cart is empty</h4></td>
              </tr>
            `;
             cartTotal.textContent = "0";
            return;
        }
        let total = 0;
        cartTable.innerHTML = "";
        cart.forEach((item, index) => {
            let subtotal = item.price * item.quantity;
            total += subtotal;
            let row = document.createElement("tr");
            row.innerHTML = `
            <td>${index + 1}</td>
            <td>${item.id}</td>
            <td>${item.name}</td>
            <td>${item.brand}</td>
            <td>${item.category}</td>
            <td>${item.price}</td>
            <td class="d-flex flex-row  align-items-center">
                <button class="btn btn-dark m-1" onclick="subtract(${item.id})">-</button>
                 ${item.quantity}
                <button class="btn btn-primary m-1" onclick="add(${item.id})">+</button>
                </td>
             <td>${item.des}</td>
            <td>${item.color}</td>
            <td>${item.material}</td>
            <td><img src="${item.images}" alt="${item.name}" width="100"></td>
            <td>${subtotal}</td>
            <td><button class="btn btn-danger m-2" onclick="removeItemInCart(${item.id})"><i class="bi bi-trash"></i></button></td>
        `;
            cartTable.appendChild(row);
           
        });
         cartTotal.textContent = total;
    }
    viewCart();
    function subtract(id){
        const item = cart.find(c => c.id === id);
        if (!item){
            return;
        } 
       if (item.quantity > 1) {
        item.quantity--;
        } 
        saveCart();
        viewCart();
    }
    function add(id){
        const item = cart.find(c => c.id === id);
        if (!item){
            return;
        } 
        item.quantity++;
        saveCart();
        viewCart();
    }
    function clearCart(){
        if(!confirm("Are you sure to delete all items?")){
            return;
        }
        cart = [];
        saveCart();
        viewCart();
        cartTotal.textContent = "0";
    }
    function removeItemInCart(id){
    if(!confirm("Want to remove this item?")){
        return;
    }
    cart = cart.filter(c => c.id !== id);
    saveCart();
    viewCart();
}
</script>
</body>
</html>